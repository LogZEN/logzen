{% extends "base.html" %}

{% block title %}Overview{% endblock %}

{% block content %}

<div class="left_graphs">
	<div class="left">
		<h2>Events by Host</h2>
		<div id="events_by_host" style="height: 200px; width: 100%;"></div>
	</div>
	<div class="right">
		<h2>TOP 5 Host</h2>
		<div id="top_hosts" style="height: 200px; width: 100%;"></div>
	</div>
</div>


<script>

data = [
	{% for c in count %}
		{label: "{{c.host}}", data: {{c.count}}}{% if loop.last != true %},{% endif %}
	{% endfor %}
]

$.plot($('#events_by_host'),
		[
			{% for c in events_by_host %}
				{label: "{{c.host}}", data: {{c.count}}}{% if loop.last != true %},{% endif %}
			{% endfor %}
		], {
	series: {
	    pie: {
	        show: true,
            combine: {
                color: '#999',
                threshold: 0.1
            }
	    }
	},
    legend: {
        show: false
    }
});
$.plot($('#top_hosts'),
		[[
			{% for c in top_hosts %}
				[{{loop.index}}, {{c.count}}]{% if loop.last != true %},{% endif %}
			{% endfor %}
		]], {
	xaxis: {
		ticks: [
				{% for c in top_hosts %}
					[{{loop.index}}, "{{c.host}}"]{% if loop.last != true %},{% endif %}
				{% endfor %}
				],
	},
	bars: {
	      show: true,
	      lineWidth: 1,
          align: "center",
          barWidth: 0.6,
	      fill: true,
	      fillColor: { colors: ["#729fcf", "#3465af"] }
	},
    legend: {
        show: false
    },
	grid: { 
		hoverable: true, 
		autoHighlight: true 
	},
	tooltip: true,
	tooltipOpts: {
		content: "%y",
		defaultTheme:  false
	},
	colors: ["#204a87"],
});
</script>

{% endblock %}